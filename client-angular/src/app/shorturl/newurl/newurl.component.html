<div class="marginAuto col col-sm-12 col-md-10 col-lg-8">
  <h3>Make your links shorter!</h3>
  <fieldset [class.focus]="focus['long_url']">
    <legend>Original URL *</legend>
    <input type="text" [(ngModel)]="long_url" (focus)="setFocus('long_url')" (blur)="setBlur('long_url')" placeholder="https://" class="long_url_input">
    <small [class.red]="long_url.indexOf('http')===-1">Original long URL start with http:// or https://</small>
  </fieldset>

  <fieldset [class.focus]="focus['title']">
    <legend><input type="checkbox" [(ngModel)]="show['title']"><label (click)="toggle('title')">Show a custom title to override content extraction.</label></legend>
    <input type="text" [(ngModel)]="title" (focus)="setFocus('title')" (blur)="setBlur('title')" *ngIf="show['title']">
    <small *ngIf="show['title']">Redirection title (optional)</small>
  </fieldset>

  <fieldset [class.focus]="focus['short_url']" *ngIf="sessionService.token.length">
    <legend><input type="checkbox" [(ngModel)]="show['short_url']"><label (click)="toggle('short_url')">Use your preferred ShortURL.</label></legend>
    <input type="text" [(ngModel)]="short_url" (focus)="setFocus('short_url')" (blur)="setBlur('short_url')" *ngIf="show['short_url']">
    <small *ngIf="show['short_url']">Preferred ShortURL (optional)</small>
  </fieldset>

  <fieldset [class.focus]="focus['expire']" *ngIf="sessionService.token.length">
    <legend><input type="checkbox" [(ngModel)]="show['expire']"><label (click)="toggle('expire')">Set an expiration date.</label></legend>
    <input type="text" [(ngModel)]="expire" (focus)="setFocus('expire')" (blur)="setBlur('expire')" *ngIf="show['expire']">
    <small *ngIf="show['expire']">Expiration date (optional)</small>
  </fieldset>

  <div class="buttonArea">
    <button class="btn bg-blue" (click)="shorten()" [disabled]="long_url.indexOf('http')===-1">Shorten URL</button>
  </div>

  <div>
    <ul class="hint">
      <li *ngIf="!sessionService.token.length">
        <div class="row">
          <div class="col-sm-12 col-md-6">
            If you <a href="/user/signin">sign in</a>,
            <ul>
                <li>You can choose your preferred Short URL.</li>
                <li>Your control when the link expires.</li>
                <li>Statistics will be available in your personal <a href="/dashboard">Dashboard</a>.</li>
            </ul>
          </div>
          <div class="col-sm-12 col-md-6">
            As a guest,
            <ul>
              <li>Your will get randomly assigned Short URL.</li>
              <li>Your links will expire 1 year after creation.</li>
              <li>Everyone can see statistics in guests' shared <a href="/dashboard">Dashboard</a></li>
            </ul>
          </div>
        </div>

      </li>
      <li *ngIf="sessionService.token.length">Welcome, {{sessionService.username}},
        <ul>
            <li>You now have the privilege to choose your preferred Short URL.</li>
            <li>Your links will never expire.</li>
            <li>Statistics is available in your <a href="/dashboard">Dashboard</a>.</li>
        </ul>
      </li>

      <li style="margin-top: 1em;">Source code for this site is available on <a href="https://github.com/gentlespoon/ShortURL-js" target="_blank"><i class="fab fa-github"></i> GitHub</a></li>
    </ul>
  </div>

</div>


<script>
  grecaptcha.ready(function() {
    grecaptcha.execute('6LcHM5QUAAAAACHSgtF-XvOoTh1K6T0osdigTiZo', {action: 'createRandom'}).then(function(token) {
    });
  });
</script>
